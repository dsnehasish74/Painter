{"id":"zACl","dependencies":[{"name":"C:\\Users\\user\\Desktop\\Painter\\package.json","includedInParent":true,"mtime":1609412549697},{"name":"./canvas","loc":{"line":1,"column":26},"parent":"C:\\Users\\user\\Desktop\\Painter\\src\\js\\controlHistory.js","resolved":"C:\\Users\\user\\Desktop\\Painter\\src\\js\\canvas.js"},{"name":"./ui","loc":{"line":2,"column":19},"parent":"C:\\Users\\user\\Desktop\\Painter\\src\\js\\controlHistory.js","resolved":"C:\\Users\\user\\Desktop\\Painter\\src\\js\\ui.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.history=void 0;var e=require(\"./canvas\"),t=require(\"./ui\");function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var r=function(){function e(){n(this,e),this.redo_list=[],this.undo_list=[],this.undoBtn=document.querySelector(\"#undo\"),this.redoBtn=document.querySelector(\"#redo\")}return o(e,[{key:\"saveState\",value:function(e,t,n){(n=n||!1)||(this.redo_list=[]),(t||this.undo_list).push(e.toDataURL())}},{key:\"undo\",value:function(e,n){this.restoreState(e,n,this.undo_list,this.redo_list),t.ui.displayNotification(\"Undo\")}},{key:\"redo\",value:function(e,n){this.restoreState(e,n,this.redo_list,this.undo_list),t.ui.displayNotification(\"Redo\")}},{key:\"restoreState\",value:function(e,t,n,i){if(n.length){this.saveState(e,i,!0);var o=n.pop(),r=new Image;r.setAttribute(\"src\",o),r.onload=function(){t.clearRect(0,0,e.width,e.height),t.drawImage(r,0,0,e.width,e.height)}}}},{key:\"keyCapture\",value:function(e){(e=e||event).ctrlKey&&90===e.keyCode&&this.undo(s,u),e.ctrlKey&&89===e.keyCode&&this.redo(s,u)}}]),e}(),a=new r;exports.history=a;var s=e.theCanvas.canvas,u=e.theCanvas.ctx;a.undoBtn.addEventListener(\"click\",a.undo.bind(a,s,u)),a.redoBtn.addEventListener(\"click\",a.redo.bind(a,s,u)),e.theCanvas.canvas.addEventListener(\"mousedown\",function(){return a.saveState(s)}),document.addEventListener(\"keyup\",a.keyCapture.bind(a));"},"sourceMaps":{"js":{"mappings":[{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":0}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":13}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":20}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":35}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":43}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":56}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":57}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":64}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":68}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":76}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":89}},{"source":"js/controlHistory.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"js/controlHistory.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"js/controlHistory.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"js/controlHistory.js","original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"js/controlHistory.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"js/controlHistory.js","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"js/controlHistory.js","original":{"line":2,"column":0},"generated":{"line":1,"column":127}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":135}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":144}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":146}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":148}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":151}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":156}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":169}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":172}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":178}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":182}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":192}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":229}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":238}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":240}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":242}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":245}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":249}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":253}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":255}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":257}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":259}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":261}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":268}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":272}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":273}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":277}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":279}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":281}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":284}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":286}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":297}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":299}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":312}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":314}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":316}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":330}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":332}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":342}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":346}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":348}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":358}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":361}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":368}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":383}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":385}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":387}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":391}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":395}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":404}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":406}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":408}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":410}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":413}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":420}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":423}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":425}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":427}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":437}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":440}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":443}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":445}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":447}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":450}},{"source":"js/controlHistory.js","name":"History","original":{"line":4,"column":6},"generated":{"line":1,"column":452}},{"source":"js/controlHistory.js","name":"History","original":{"line":4,"column":6},"generated":{"line":1,"column":456}},{"source":"js/controlHistory.js","name":"History","original":{"line":4,"column":6},"generated":{"line":1,"column":458}},{"source":"js/controlHistory.js","original":{"line":5,"column":18},"generated":{"line":1,"column":469}},{"source":"js/controlHistory.js","original":{"line":5,"column":18},"generated":{"line":1,"column":478}},{"source":"js/controlHistory.js","original":{"line":5,"column":18},"generated":{"line":1,"column":482}},{"source":"js/controlHistory.js","original":{"line":5,"column":18},"generated":{"line":1,"column":484}},{"source":"js/controlHistory.js","original":{"line":5,"column":18},"generated":{"line":1,"column":489}},{"source":"js/controlHistory.js","name":"redo_list","original":{"line":6,"column":13},"generated":{"line":1,"column":492}},{"source":"js/controlHistory.js","name":"redo_list","original":{"line":6,"column":13},"generated":{"line":1,"column":497}},{"source":"js/controlHistory.js","original":{"line":6,"column":25},"generated":{"line":1,"column":507}},{"source":"js/controlHistory.js","name":"undo_list","original":{"line":7,"column":13},"generated":{"line":1,"column":510}},{"source":"js/controlHistory.js","name":"undo_list","original":{"line":7,"column":13},"generated":{"line":1,"column":515}},{"source":"js/controlHistory.js","original":{"line":7,"column":25},"generated":{"line":1,"column":525}},{"source":"js/controlHistory.js","name":"undoBtn","original":{"line":10,"column":13},"generated":{"line":1,"column":528}},{"source":"js/controlHistory.js","name":"undoBtn","original":{"line":10,"column":13},"generated":{"line":1,"column":533}},{"source":"js/controlHistory.js","name":"document","original":{"line":10,"column":23},"generated":{"line":1,"column":541}},{"source":"js/controlHistory.js","name":"querySelector","original":{"line":10,"column":32},"generated":{"line":1,"column":550}},{"source":"js/controlHistory.js","original":{"line":10,"column":46},"generated":{"line":1,"column":564}},{"source":"js/controlHistory.js","name":"redoBtn","original":{"line":11,"column":13},"generated":{"line":1,"column":573}},{"source":"js/controlHistory.js","name":"redoBtn","original":{"line":11,"column":13},"generated":{"line":1,"column":578}},{"source":"js/controlHistory.js","name":"document","original":{"line":11,"column":23},"generated":{"line":1,"column":586}},{"source":"js/controlHistory.js","name":"querySelector","original":{"line":11,"column":32},"generated":{"line":1,"column":595}},{"source":"js/controlHistory.js","original":{"line":11,"column":46},"generated":{"line":1,"column":609}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":618}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":625}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":627}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":629}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":630}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":631}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":635}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":15,"column":14},"generated":{"line":1,"column":647}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":15,"column":14},"generated":{"line":1,"column":653}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":15,"column":14},"generated":{"line":1,"column":662}},{"source":"js/controlHistory.js","name":"list","original":{"line":15,"column":22},"generated":{"line":1,"column":664}},{"source":"js/controlHistory.js","name":"keep_redo","original":{"line":15,"column":28},"generated":{"line":1,"column":666}},{"source":"js/controlHistory.js","name":"keep_redo","original":{"line":16,"column":8},"generated":{"line":1,"column":670}},{"source":"js/controlHistory.js","name":"keep_redo","original":{"line":16,"column":20},"generated":{"line":1,"column":672}},{"source":"js/controlHistory.js","original":{"line":16,"column":33},"generated":{"line":1,"column":676}},{"source":"js/controlHistory.js","name":"redo_list","original":{"line":18,"column":17},"generated":{"line":1,"column":681}},{"source":"js/controlHistory.js","name":"redo_list","original":{"line":18,"column":17},"generated":{"line":1,"column":686}},{"source":"js/controlHistory.js","original":{"line":18,"column":29},"generated":{"line":1,"column":696}},{"source":"js/controlHistory.js","name":"list","original":{"line":21,"column":9},"generated":{"line":1,"column":701}},{"source":"js/controlHistory.js","original":{"line":21,"column":17},"generated":{"line":1,"column":704}},{"source":"js/controlHistory.js","name":"undo_list","original":{"line":21,"column":22},"generated":{"line":1,"column":709}},{"source":"js/controlHistory.js","name":"push","original":{"line":21,"column":33},"generated":{"line":1,"column":720}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":21,"column":38},"generated":{"line":1,"column":725}},{"source":"js/controlHistory.js","name":"toDataURL","original":{"line":21,"column":45},"generated":{"line":1,"column":727}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":742}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":743}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":747}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":25,"column":9},"generated":{"line":1,"column":754}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":25,"column":9},"generated":{"line":1,"column":760}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":25,"column":9},"generated":{"line":1,"column":769}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":25,"column":17},"generated":{"line":1,"column":771}},{"source":"js/controlHistory.js","name":"restoreState","original":{"line":26,"column":13},"generated":{"line":1,"column":774}},{"source":"js/controlHistory.js","name":"restoreState","original":{"line":26,"column":13},"generated":{"line":1,"column":779}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":26,"column":26},"generated":{"line":1,"column":792}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":26,"column":34},"generated":{"line":1,"column":794}},{"source":"js/controlHistory.js","original":{"line":26,"column":39},"generated":{"line":1,"column":796}},{"source":"js/controlHistory.js","name":"undo_list","original":{"line":26,"column":44},"generated":{"line":1,"column":801}},{"source":"js/controlHistory.js","original":{"line":26,"column":55},"generated":{"line":1,"column":811}},{"source":"js/controlHistory.js","name":"redo_list","original":{"line":26,"column":60},"generated":{"line":1,"column":816}},{"source":"js/controlHistory.js","name":"displayNotification","original":{"line":27,"column":11},"generated":{"line":1,"column":827}},{"source":"js/controlHistory.js","name":"displayNotification","original":{"line":27,"column":11},"generated":{"line":1,"column":829}},{"source":"js/controlHistory.js","name":"displayNotification","original":{"line":27,"column":11},"generated":{"line":1,"column":832}},{"source":"js/controlHistory.js","original":{"line":27,"column":31},"generated":{"line":1,"column":852}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":862}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":863}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":867}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":31,"column":9},"generated":{"line":1,"column":874}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":31,"column":9},"generated":{"line":1,"column":880}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":31,"column":9},"generated":{"line":1,"column":889}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":31,"column":17},"generated":{"line":1,"column":891}},{"source":"js/controlHistory.js","name":"restoreState","original":{"line":32,"column":11},"generated":{"line":1,"column":894}},{"source":"js/controlHistory.js","name":"restoreState","original":{"line":32,"column":11},"generated":{"line":1,"column":899}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":32,"column":24},"generated":{"line":1,"column":912}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":32,"column":32},"generated":{"line":1,"column":914}},{"source":"js/controlHistory.js","original":{"line":32,"column":37},"generated":{"line":1,"column":916}},{"source":"js/controlHistory.js","name":"redo_list","original":{"line":32,"column":42},"generated":{"line":1,"column":921}},{"source":"js/controlHistory.js","original":{"line":32,"column":53},"generated":{"line":1,"column":931}},{"source":"js/controlHistory.js","name":"undo_list","original":{"line":32,"column":58},"generated":{"line":1,"column":936}},{"source":"js/controlHistory.js","name":"displayNotification","original":{"line":33,"column":9},"generated":{"line":1,"column":947}},{"source":"js/controlHistory.js","name":"displayNotification","original":{"line":33,"column":9},"generated":{"line":1,"column":949}},{"source":"js/controlHistory.js","name":"displayNotification","original":{"line":33,"column":9},"generated":{"line":1,"column":952}},{"source":"js/controlHistory.js","original":{"line":33,"column":29},"generated":{"line":1,"column":972}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":982}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":983}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":987}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":37,"column":17},"generated":{"line":1,"column":1002}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":37,"column":17},"generated":{"line":1,"column":1008}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":37,"column":17},"generated":{"line":1,"column":1017}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":37,"column":25},"generated":{"line":1,"column":1019}},{"source":"js/controlHistory.js","name":"pop","original":{"line":37,"column":30},"generated":{"line":1,"column":1021}},{"source":"js/controlHistory.js","name":"push","original":{"line":37,"column":35},"generated":{"line":1,"column":1023}},{"source":"js/controlHistory.js","name":"pop","original":{"line":38,"column":11},"generated":{"line":1,"column":1026}},{"source":"js/controlHistory.js","name":"pop","original":{"line":38,"column":11},"generated":{"line":1,"column":1029}},{"source":"js/controlHistory.js","name":"length","original":{"line":38,"column":15},"generated":{"line":1,"column":1031}},{"source":"js/controlHistory.js","original":{"line":38,"column":23},"generated":{"line":1,"column":1038}},{"source":"js/controlHistory.js","name":"saveState","original":{"line":39,"column":17},"generated":{"line":1,"column":1039}},{"source":"js/controlHistory.js","name":"saveState","original":{"line":39,"column":17},"generated":{"line":1,"column":1044}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":39,"column":27},"generated":{"line":1,"column":1054}},{"source":"js/controlHistory.js","name":"push","original":{"line":39,"column":35},"generated":{"line":1,"column":1056}},{"source":"js/controlHistory.js","original":{"line":39,"column":41},"generated":{"line":1,"column":1059}},{"source":"js/controlHistory.js","name":"restore_state","original":{"line":40,"column":16},"generated":{"line":1,"column":1062}},{"source":"js/controlHistory.js","name":"src","original":{"line":41,"column":18},"generated":{"line":1,"column":1066}},{"source":"js/controlHistory.js","name":"pop","original":{"line":40,"column":32},"generated":{"line":1,"column":1068}},{"source":"js/controlHistory.js","name":"pop","original":{"line":40,"column":36},"generated":{"line":1,"column":1070}},{"source":"js/controlHistory.js","name":"img","original":{"line":43,"column":18},"generated":{"line":1,"column":1076}},{"source":"js/controlHistory.js","original":{"line":43,"column":24},"generated":{"line":1,"column":1078}},{"source":"js/controlHistory.js","name":"Image","original":{"line":43,"column":28},"generated":{"line":1,"column":1082}},{"source":"js/controlHistory.js","name":"img","original":{"line":44,"column":12},"generated":{"line":1,"column":1088}},{"source":"js/controlHistory.js","name":"setAttribute","original":{"line":44,"column":16},"generated":{"line":1,"column":1090}},{"source":"js/controlHistory.js","original":{"line":44,"column":29},"generated":{"line":1,"column":1103}},{"source":"js/controlHistory.js","name":"src","original":{"line":44,"column":36},"generated":{"line":1,"column":1109}},{"source":"js/controlHistory.js","name":"img","original":{"line":45,"column":12},"generated":{"line":1,"column":1112}},{"source":"js/controlHistory.js","name":"onload","original":{"line":45,"column":16},"generated":{"line":1,"column":1114}},{"source":"js/controlHistory.js","original":{"line":45,"column":25},"generated":{"line":1,"column":1121}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":46,"column":14},"generated":{"line":1,"column":1132}},{"source":"js/controlHistory.js","name":"clearRect","original":{"line":46,"column":18},"generated":{"line":1,"column":1134}},{"source":"js/controlHistory.js","original":{"line":46,"column":28},"generated":{"line":1,"column":1144}},{"source":"js/controlHistory.js","original":{"line":46,"column":31},"generated":{"line":1,"column":1146}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":46,"column":34},"generated":{"line":1,"column":1148}},{"source":"js/controlHistory.js","name":"width","original":{"line":46,"column":41},"generated":{"line":1,"column":1150}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":46,"column":48},"generated":{"line":1,"column":1156}},{"source":"js/controlHistory.js","name":"height","original":{"line":46,"column":55},"generated":{"line":1,"column":1158}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":47,"column":14},"generated":{"line":1,"column":1166}},{"source":"js/controlHistory.js","name":"drawImage","original":{"line":47,"column":18},"generated":{"line":1,"column":1168}},{"source":"js/controlHistory.js","name":"img","original":{"line":47,"column":28},"generated":{"line":1,"column":1178}},{"source":"js/controlHistory.js","original":{"line":47,"column":33},"generated":{"line":1,"column":1180}},{"source":"js/controlHistory.js","original":{"line":47,"column":36},"generated":{"line":1,"column":1182}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":47,"column":39},"generated":{"line":1,"column":1184}},{"source":"js/controlHistory.js","name":"width","original":{"line":47,"column":46},"generated":{"line":1,"column":1186}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":47,"column":53},"generated":{"line":1,"column":1192}},{"source":"js/controlHistory.js","name":"height","original":{"line":47,"column":60},"generated":{"line":1,"column":1194}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1206}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1207}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1211}},{"source":"js/controlHistory.js","name":"e","original":{"line":53,"column":15},"generated":{"line":1,"column":1224}},{"source":"js/controlHistory.js","name":"e","original":{"line":53,"column":15},"generated":{"line":1,"column":1230}},{"source":"js/controlHistory.js","name":"e","original":{"line":53,"column":15},"generated":{"line":1,"column":1239}},{"source":"js/controlHistory.js","name":"e","original":{"line":54,"column":8},"generated":{"line":1,"column":1243}},{"source":"js/controlHistory.js","name":"e","original":{"line":54,"column":12},"generated":{"line":1,"column":1245}},{"source":"js/controlHistory.js","name":"event","original":{"line":54,"column":17},"generated":{"line":1,"column":1248}},{"source":"js/controlHistory.js","name":"ctrlKey","original":{"line":57,"column":13},"generated":{"line":1,"column":1255}},{"source":"js/controlHistory.js","original":{"line":57,"column":38},"generated":{"line":1,"column":1264}},{"source":"js/controlHistory.js","name":"e","original":{"line":57,"column":24},"generated":{"line":1,"column":1269}},{"source":"js/controlHistory.js","name":"keyCode","original":{"line":57,"column":26},"generated":{"line":1,"column":1271}},{"source":"js/controlHistory.js","name":"undo","original":{"line":58,"column":17},"generated":{"line":1,"column":1280}},{"source":"js/controlHistory.js","name":"undo","original":{"line":58,"column":17},"generated":{"line":1,"column":1285}},{"source":"js/controlHistory.js","name":"cvs","original":{"line":58,"column":22},"generated":{"line":1,"column":1290}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":58,"column":27},"generated":{"line":1,"column":1292}},{"source":"js/controlHistory.js","name":"e","original":{"line":62,"column":12},"generated":{"line":1,"column":1295}},{"source":"js/controlHistory.js","name":"ctrlKey","original":{"line":62,"column":14},"generated":{"line":1,"column":1297}},{"source":"js/controlHistory.js","original":{"line":62,"column":39},"generated":{"line":1,"column":1306}},{"source":"js/controlHistory.js","name":"e","original":{"line":62,"column":25},"generated":{"line":1,"column":1311}},{"source":"js/controlHistory.js","name":"keyCode","original":{"line":62,"column":27},"generated":{"line":1,"column":1313}},{"source":"js/controlHistory.js","name":"redo","original":{"line":63,"column":17},"generated":{"line":1,"column":1322}},{"source":"js/controlHistory.js","name":"redo","original":{"line":63,"column":17},"generated":{"line":1,"column":1327}},{"source":"js/controlHistory.js","name":"cvs","original":{"line":63,"column":22},"generated":{"line":1,"column":1332}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":63,"column":27},"generated":{"line":1,"column":1334}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1341}},{"source":"js/controlHistory.js","name":"History","original":{"line":4,"column":6},"generated":{"line":1,"column":1343}},{"source":"js/controlHistory.js","name":"history","original":{"line":68,"column":13},"generated":{"line":1,"column":1346}},{"source":"js/controlHistory.js","original":{"line":68,"column":23},"generated":{"line":1,"column":1348}},{"source":"js/controlHistory.js","name":"History","original":{"line":68,"column":27},"generated":{"line":1,"column":1352}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1354}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1362}},{"source":"js/controlHistory.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1370}},{"source":"js/controlHistory.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1372}},{"source":"js/controlHistory.js","name":"cvs","original":{"line":69,"column":6},"generated":{"line":1,"column":1376}},{"source":"js/controlHistory.js","name":"theCanvas","original":{"line":69,"column":12},"generated":{"line":1,"column":1378}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":69,"column":22},"generated":{"line":1,"column":1380}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":69,"column":22},"generated":{"line":1,"column":1390}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":70,"column":6},"generated":{"line":1,"column":1397}},{"source":"js/controlHistory.js","name":"theCanvas","original":{"line":70,"column":12},"generated":{"line":1,"column":1399}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":70,"column":22},"generated":{"line":1,"column":1401}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":70,"column":22},"generated":{"line":1,"column":1411}},{"source":"js/controlHistory.js","name":"history","original":{"line":72,"column":0},"generated":{"line":1,"column":1415}},{"source":"js/controlHistory.js","name":"undoBtn","original":{"line":72,"column":8},"generated":{"line":1,"column":1417}},{"source":"js/controlHistory.js","name":"addEventListener","original":{"line":72,"column":16},"generated":{"line":1,"column":1425}},{"source":"js/controlHistory.js","original":{"line":72,"column":33},"generated":{"line":1,"column":1442}},{"source":"js/controlHistory.js","name":"history","original":{"line":72,"column":42},"generated":{"line":1,"column":1450}},{"source":"js/controlHistory.js","name":"undo","original":{"line":72,"column":50},"generated":{"line":1,"column":1452}},{"source":"js/controlHistory.js","name":"bind","original":{"line":72,"column":55},"generated":{"line":1,"column":1457}},{"source":"js/controlHistory.js","name":"history","original":{"line":72,"column":60},"generated":{"line":1,"column":1462}},{"source":"js/controlHistory.js","name":"cvs","original":{"line":72,"column":69},"generated":{"line":1,"column":1464}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":72,"column":74},"generated":{"line":1,"column":1466}},{"source":"js/controlHistory.js","name":"history","original":{"line":73,"column":0},"generated":{"line":1,"column":1470}},{"source":"js/controlHistory.js","name":"redoBtn","original":{"line":73,"column":8},"generated":{"line":1,"column":1472}},{"source":"js/controlHistory.js","name":"addEventListener","original":{"line":73,"column":16},"generated":{"line":1,"column":1480}},{"source":"js/controlHistory.js","original":{"line":73,"column":33},"generated":{"line":1,"column":1497}},{"source":"js/controlHistory.js","name":"history","original":{"line":73,"column":42},"generated":{"line":1,"column":1505}},{"source":"js/controlHistory.js","name":"redo","original":{"line":73,"column":50},"generated":{"line":1,"column":1507}},{"source":"js/controlHistory.js","name":"bind","original":{"line":73,"column":55},"generated":{"line":1,"column":1512}},{"source":"js/controlHistory.js","name":"history","original":{"line":73,"column":60},"generated":{"line":1,"column":1517}},{"source":"js/controlHistory.js","name":"cvs","original":{"line":73,"column":69},"generated":{"line":1,"column":1519}},{"source":"js/controlHistory.js","name":"ctx","original":{"line":73,"column":74},"generated":{"line":1,"column":1521}},{"source":"js/controlHistory.js","name":"theCanvas","original":{"line":74,"column":0},"generated":{"line":1,"column":1525}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":74,"column":10},"generated":{"line":1,"column":1527}},{"source":"js/controlHistory.js","name":"canvas","original":{"line":74,"column":10},"generated":{"line":1,"column":1537}},{"source":"js/controlHistory.js","name":"addEventListener","original":{"line":74,"column":17},"generated":{"line":1,"column":1544}},{"source":"js/controlHistory.js","original":{"line":74,"column":34},"generated":{"line":1,"column":1561}},{"source":"js/controlHistory.js","original":{"line":74,"column":47},"generated":{"line":1,"column":1573}},{"source":"js/controlHistory.js","name":"history","original":{"line":74,"column":53},"generated":{"line":1,"column":1584}},{"source":"js/controlHistory.js","name":"history","original":{"line":74,"column":53},"generated":{"line":1,"column":1591}},{"source":"js/controlHistory.js","name":"saveState","original":{"line":74,"column":61},"generated":{"line":1,"column":1593}},{"source":"js/controlHistory.js","name":"cvs","original":{"line":74,"column":71},"generated":{"line":1,"column":1603}},{"source":"js/controlHistory.js","name":"document","original":{"line":75,"column":0},"generated":{"line":1,"column":1608}},{"source":"js/controlHistory.js","name":"addEventListener","original":{"line":75,"column":9},"generated":{"line":1,"column":1617}},{"source":"js/controlHistory.js","original":{"line":75,"column":26},"generated":{"line":1,"column":1634}},{"source":"js/controlHistory.js","name":"history","original":{"line":75,"column":35},"generated":{"line":1,"column":1642}},{"source":"js/controlHistory.js","name":"keyCapture","original":{"line":75,"column":43},"generated":{"line":1,"column":1644}},{"source":"js/controlHistory.js","name":"bind","original":{"line":75,"column":54},"generated":{"line":1,"column":1655}},{"source":"js/controlHistory.js","name":"history","original":{"line":75,"column":59},"generated":{"line":1,"column":1660}}],"sources":{"js/controlHistory.js":"import { theCanvas } from './canvas';\r\nimport { ui } from './ui';\r\n\r\nclass History { \r\n    constructor() {\r\n        this.redo_list = [];\r\n        this.undo_list = [];\r\n        \r\n        // Undo & Redo buttons\r\n        this.undoBtn = document.querySelector(\"#undo\");\r\n        this.redoBtn = document.querySelector(\"#redo\");\r\n    }\r\n\r\n    // Save the state\r\n    saveState(canvas, list, keep_redo) {\r\n        keep_redo = keep_redo || false;\r\n        if(!keep_redo) {\r\n            this.redo_list = [];\r\n        }\r\n        \r\n        (list || this.undo_list).push(canvas.toDataURL());  \r\n    }\r\n\r\n    // Undo action\r\n    undo(canvas, ctx) {\r\n        this.restoreState(canvas, ctx, this.undo_list, this.redo_list);\r\n        ui.displayNotification(\"Undo\");\r\n    }\r\n\r\n    // Redo action\r\n    redo(canvas, ctx) {\r\n      this.restoreState(canvas, ctx, this.redo_list, this.undo_list);\r\n      ui.displayNotification(\"Redo\");        \r\n    }\r\n\r\n    // Restore the state\r\n    restoreState(canvas, ctx, pop, push) {\r\n        if(pop.length) {\r\n            this.saveState(canvas, push, true);\r\n            var restore_state = pop.pop();\r\n            const src = restore_state;\r\n    \r\n            const img = new Image();\r\n            img.setAttribute('src', src);\r\n            img.onload = function() {\r\n              ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n              ctx.drawImage(img, 0, 0, canvas.width, canvas.height);  \r\n            }\r\n        }\r\n    }\r\n    \r\n    // Call undo / redo with keyboards\r\n    keyCapture(e) { \r\n        e = e || event;\r\n\r\n        // Ctrl + Z combination\r\n        if(e.ctrlKey && e.keyCode === 90) {\r\n            this.undo(cvs, ctx);\r\n        }\r\n        \r\n        // Ctrl + Y combination\r\n        if (e.ctrlKey && e.keyCode === 89) {\r\n            this.redo(cvs, ctx);\r\n        }\r\n    }\r\n}\r\n\r\nexport const history = new History();\r\nconst cvs = theCanvas.canvas;\r\nconst ctx = theCanvas.ctx;\r\n\r\nhistory.undoBtn.addEventListener(\"click\", history.undo.bind(history, cvs, ctx));\r\nhistory.redoBtn.addEventListener(\"click\", history.redo.bind(history, cvs, ctx));\r\ntheCanvas.canvas.addEventListener(\"mousedown\", () => history.saveState(cvs));\r\ndocument.addEventListener(\"keyup\", history.keyCapture.bind(history));\r\n"},"lineCount":null}},"error":null,"hash":"26d449166a24b4cd6b3de38ad353109c","cacheData":{"env":{}}}